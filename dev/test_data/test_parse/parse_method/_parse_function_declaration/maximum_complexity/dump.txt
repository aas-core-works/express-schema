FunctionDeclaration(
  position=1:1,
  identifier='advancedDataProcessor',
  formal_parameters=[
      FormalParameter(
        position=2:9,
        identifiers=['inputStreams'],
        of_type=ConformantArrayType(
            position=2:24,
            bound_spec=BoundSpec(
                position=2:30,
                lower=IntegerLiteral(
                    position=2:31,
                    value=1
                  ),
                upper=IntegerLiteral(
                    position=2:33,
                    value=10
                  )
              ),
            optional=False,
            unique=False,
            of=ConformantListType(
                position=2:40,
                bound_spec=BoundSpec(
                    position=2:45,
                    lower=IntegerLiteral(
                        position=2:46,
                        value=1
                      ),
                    upper=IndeterminateLiteral(
                        position=2:48
                      )
                  ),
                unique=False,
                of=NamedType(
                    position=2:54,
                    reference='DataPacket'
                  )
              )
          )
      ),
      FormalParameter(
        position=3:9,
        identifiers=['processingConfig'],
        of_type=NamedType(
            position=3:28,
            reference='ProcessingConfiguration'
          )
      ),
      FormalParameter(
        position=4:9,
        identifiers=['outputTargets'],
        of_type=ConformantSetType(
            position=4:25,
            bound_spec=BoundSpec(
                position=4:29,
                lower=IntegerLiteral(
                    position=4:30,
                    value=1
                  ),
                upper=IntegerLiteral(
                    position=4:32,
                    value=5
                  )
              ),
            of=NamedType(
                position=4:38,
                reference='OutputTarget'
              )
          )
      ),
      FormalParameter(
        position=5:9,
        identifiers=['qualityThresholds'],
        of_type=ConformantBagType(
            position=5:29,
            bound_spec=BoundSpec(
                position=5:33,
                lower=IntegerLiteral(
                    position=5:34,
                    value=0
                  ),
                upper=IntegerLiteral(
                    position=5:36,
                    value=20
                  )
              ),
            of=NamedType(
                position=5:43,
                reference='QualityMetric'
              )
          )
      ),
      FormalParameter(
        position=6:9,
        identifiers=['genericProcessors'],
        of_type=ConformantArrayType(
            position=6:29,
            bound_spec=BoundSpec(
                position=6:35,
                lower=IntegerLiteral(
                    position=6:36,
                    value=1
                  ),
                upper=IntegerLiteral(
                    position=6:38,
                    value=3
                  )
              ),
            optional=False,
            unique=False,
            of=GenericType(
                position=6:44
              )
          )
      ),
      FormalParameter(
        position=7:9,
        identifiers=['conformantBuffers'],
        of_type=ConformantArrayType(
            position=7:29,
            optional=False,
            unique=False,
            of=ConformantListType(
                position=7:38,
                unique=False,
                of=NamedType(
                    position=7:46,
                    reference='DataBuffer'
                  )
              )
          )
      )
    ],
  return_type=NamedType(
      position=8:9,
      reference='ProcessingResults'
    ),
  head=AlgorithmHead(
      declarations=[
          TypeDeclaration(
            position=10:5,
            identifier='ProcessingStage',
            type_selection=EnumType(
                position=10:28,
                values=[
                    'preprocessing',
                    'validation',
                    'transformation',
                    'postprocessing'
                  ]
              ),
            domain_rules=[]
          ),
          TypeDeclaration(
            position=14:5,
            identifier='QualityLevel',
            type_selection=EnumType(
                position=14:25,
                values=[
                    'low',
                    'medium',
                    'high',
                    'premium'
                  ]
              ),
            domain_rules=[]
          ),
          EntityDeclaration(
            position=18:5,
            identifier='ProcessingContext',
            explicit_clauses=[
                ExplicitAttributeDefinition(
                  position=19:9,
                  attributes=[NameRef(
                      position=19:9,
                      identifier='stage'
                    )],
                  optional=False,
                  type_selection=NamedType(
                      position=19:17,
                      reference='ProcessingStage'
                    )
                ),
                ExplicitAttributeDefinition(
                  position=20:9,
                  attributes=[NameRef(
                      position=20:9,
                      identifier='qualityLevel'
                    )],
                  optional=False,
                  type_selection=NamedType(
                      position=20:24,
                      reference='QualityLevel'
                    )
                ),
                ExplicitAttributeDefinition(
                  position=21:9,
                  attributes=[NameRef(
                      position=21:9,
                      identifier='throughput'
                    )],
                  optional=False,
                  type_selection=RealType(
                      position=21:22
                    )
                ),
                ExplicitAttributeDefinition(
                  position=22:9,
                  attributes=[NameRef(
                      position=22:9,
                      identifier='errorRate'
                    )],
                  optional=False,
                  type_selection=RealType(
                      position=22:21
                    )
                )
              ],
            derive_clauses=[],
            inverse_clauses=[],
            unique_rules=[],
            domain_rules=[]
          ),
          FunctionDeclaration(
            position=25:5,
            identifier='validatePacket',
            formal_parameters=[
                FormalParameter(
                  position=25:29,
                  identifiers=['packet'],
                  of_type=NamedType(
                      position=25:38,
                      reference='DataPacket'
                    )
                ),
                FormalParameter(
                  position=25:50,
                  identifiers=['metrics'],
                  of_type=NamedType(
                      position=25:60,
                      reference='QualityMetric'
                    )
                )
              ],
            return_type=BooleanType(
                position=25:77
              ),
            head=AlgorithmHead(
                declarations=[],
                constant_definitions=[],
                local_variable_definitions=[]
              ),
            body=[ReturnStmt(
                position=26:9,
                value=AttributeRef(
                    position=26:16,
                    source=NameRef(
                        position=26:16,
                        identifier='packet'
                      ),
                    identifier='isValid'
                  )
              )]
          ),
          ProcedureDeclaration(
            position=29:5,
            identifier='logProcessingEvent',
            formal_parameters=[
                FormalParameter(
                  position=29:34,
                  identifiers=['context'],
                  of_type=NamedType(
                      position=29:44,
                      reference='ProcessingContext'
                    )
                ),
                FormalParameter(
                  position=29:63,
                  identifiers=['message'],
                  of_type=StringType(
                      position=29:73,
                      fixed=False
                    )
                )
              ],
            head=AlgorithmHead(
                declarations=[],
                constant_definitions=[],
                local_variable_definitions=[]
              ),
            body=[SkipStmt(
                position=30:9
              )]
          )
        ],
      constant_definitions=[
          ConstantDefinition(
            position=34:9,
            identifier='maxConcurrentStreams',
            type_selection=IntegerType(
                position=34:32
              ),
            init=IntegerLiteral(
                position=34:43,
                value=10
              )
          ),
          ConstantDefinition(
            position=35:9,
            identifier='defaultQualityLevel',
            type_selection=NamedType(
                position=35:31,
                reference='QualityLevel'
              ),
            init=NameRef(
                position=35:47,
                identifier='medium'
              )
          ),
          ConstantDefinition(
            position=36:9,
            identifier='processingTimeout',
            type_selection=RealType(
                position=36:29
              ),
            init=RealLiteral(
                position=36:37,
                value=300.0
              )
          ),
          ConstantDefinition(
            position=37:9,
            identifier='maxRetries',
            type_selection=IntegerType(
                position=37:22
              ),
            init=IntegerLiteral(
                position=37:33,
                value=3
              )
          ),
          ConstantDefinition(
            position=38:9,
            identifier='bufferSize',
            type_selection=IntegerType(
                position=38:22
              ),
            init=IntegerLiteral(
                position=38:33,
                value=8192
              )
          )
        ],
      local_variable_definitions=[
          LocalVariableDefinition(
            position=42:9,
            identifiers=['results'],
            of_type=NamedType(
                position=42:19,
                reference='ProcessingResults'
              )
          ),
          LocalVariableDefinition(
            position=43:9,
            identifiers=['processingContext'],
            of_type=NamedType(
                position=43:29,
                reference='ProcessingContext'
              )
          ),
          LocalVariableDefinition(
            position=44:9,
            identifiers=['currentStream'],
            of_type=ConformantListType(
                position=44:25,
                bound_spec=BoundSpec(
                    position=44:30,
                    lower=IntegerLiteral(
                        position=44:31,
                        value=1
                      ),
                    upper=IndeterminateLiteral(
                        position=44:33
                      )
                  ),
                unique=False,
                of=NamedType(
                    position=44:39,
                    reference='DataPacket'
                  )
              )
          ),
          LocalVariableDefinition(
            position=45:9,
            identifiers=['currentPacket'],
            of_type=NamedType(
                position=45:25,
                reference='DataPacket'
              )
          ),
          LocalVariableDefinition(
            position=46:9,
            identifiers=['currentMetric'],
            of_type=NamedType(
                position=46:25,
                reference='QualityMetric'
              )
          ),
          LocalVariableDefinition(
            position=47:9,
            identifiers=['processedPackets'],
            of_type=ConformantListType(
                position=47:28,
                bound_spec=BoundSpec(
                    position=47:33,
                    lower=IntegerLiteral(
                        position=47:34,
                        value=1
                      ),
                    upper=IntegerLiteral(
                        position=47:36,
                        value=10000
                      )
                  ),
                unique=False,
                of=NamedType(
                    position=47:46,
                    reference='DataPacket'
                  )
              ),
            init=AggregateLiteral(
                position=47:60,
                elements=[]
              )
          ),
          LocalVariableDefinition(
            position=48:9,
            identifiers=['validPackets'],
            of_type=ConformantSetType(
                position=48:24,
                bound_spec=BoundSpec(
                    position=48:28,
                    lower=IntegerLiteral(
                        position=48:29,
                        value=1
                      ),
                    upper=IntegerLiteral(
                        position=48:31,
                        value=5000
                      )
                  ),
                of=NamedType(
                    position=48:40,
                    reference='DataPacket'
                  )
              ),
            init=AggregateLiteral(
                position=48:54,
                elements=[]
              )
          ),
          LocalVariableDefinition(
            position=49:9,
            identifiers=['errorLog'],
            of_type=ConformantArrayType(
                position=49:20,
                bound_spec=BoundSpec(
                    position=49:26,
                    lower=IntegerLiteral(
                        position=49:27,
                        value=1
                      ),
                    upper=IntegerLiteral(
                        position=49:29,
                        value=1000
                      )
                  ),
                optional=False,
                unique=False,
                of=StringType(
                    position=49:38,
                    fixed=False
                  )
              ),
            init=AggregateLiteral(
                position=49:48,
                elements=[]
              )
          ),
          LocalVariableDefinition(
            position=50:9,
            identifiers=[
                'streamIndex',
                'packetIndex',
                'metricIndex'
              ],
            of_type=IntegerType(
                position=50:49
              )
          ),
          LocalVariableDefinition(
            position=51:9,
            identifiers=[
                'processingStartTime',
                'processingEndTime'
              ],
            of_type=RealType(
                position=51:50
              )
          ),
          LocalVariableDefinition(
            position=52:9,
            identifiers=['isValid'],
            of_type=BooleanType(
                position=52:19
              )
          ),
          LocalVariableDefinition(
            position=53:9,
            identifiers=['retryCount'],
            of_type=IntegerType(
                position=53:22
              ),
            init=IntegerLiteral(
                position=53:33,
                value=0
              )
          ),
          LocalVariableDefinition(
            position=54:9,
            identifiers=['totalProcessed'],
            of_type=IntegerType(
                position=54:26
              ),
            init=IntegerLiteral(
                position=54:37,
                value=0
              )
          ),
          LocalVariableDefinition(
            position=55:9,
            identifiers=['totalErrors'],
            of_type=IntegerType(
                position=55:23
              ),
            init=IntegerLiteral(
                position=55:34,
                value=0
              )
          )
        ]
    ),
  body=[
      AssignmentStmt(
        position=58:5,
        target=AttributeRef(
            position=58:5,
            source=NameRef(
                position=58:5,
                identifier='processingContext'
              ),
            identifier='stage'
          ),
        value=NameRef(
            position=58:32,
            identifier='preprocessing'
          )
      ),
      AssignmentStmt(
        position=59:5,
        target=AttributeRef(
            position=59:5,
            source=NameRef(
                position=59:5,
                identifier='processingContext'
              ),
            identifier='qualityLevel'
          ),
        value=NameRef(
            position=59:39,
            identifier='defaultQualityLevel'
          )
      ),
      AssignmentStmt(
        position=60:5,
        target=NameRef(
            position=60:5,
            identifier='processingStartTime'
          ),
        value=Call(
            position=60:28,
            callee=NameRef(
                position=60:28,
                identifier='getCurrentTime'
              ),
            args=[]
          )
      ),
      RepeatStmt(
        position=62:5,
        control=RepeatControl(
            position=62:12,
            increment_control=IncrementControl(
                position=62:12,
                variable='streamIndex',
                bound_1=IntegerLiteral(
                    position=62:27,
                    value=1
                  ),
                bound_2=Call(
                    position=62:32,
                    callee=NameRef(
                        position=62:32,
                        identifier='SIZEOF'
                      ),
                    args=[Arg(
                        position=62:39,
                        value=NameRef(
                            position=62:39,
                            identifier='inputStreams'
                          )
                      )]
                  )
              )
          ),
        body=[
            AssignmentStmt(
              position=63:9,
              target=NameRef(
                  position=63:9,
                  identifier='currentStream'
                ),
              value=IndexExpr(
                  position=63:26,
                  source=NameRef(
                      position=63:26,
                      identifier='inputStreams'
                    ),
                  index=NameRef(
                      position=63:39,
                      identifier='streamIndex'
                    )
                )
            ),
            RepeatStmt(
              position=65:9,
              control=RepeatControl(
                  position=65:16,
                  increment_control=IncrementControl(
                      position=65:16,
                      variable='packetIndex',
                      bound_1=IntegerLiteral(
                          position=65:31,
                          value=1
                        ),
                      bound_2=Call(
                          position=65:36,
                          callee=NameRef(
                              position=65:36,
                              identifier='SIZEOF'
                            ),
                          args=[Arg(
                              position=65:43,
                              value=NameRef(
                                  position=65:43,
                                  identifier='currentStream'
                                )
                            )]
                        )
                    )
                ),
              body=[
                  AssignmentStmt(
                    position=66:13,
                    target=NameRef(
                        position=66:13,
                        identifier='currentPacket'
                      ),
                    value=IndexExpr(
                        position=66:30,
                        source=NameRef(
                            position=66:30,
                            identifier='currentStream'
                          ),
                        index=NameRef(
                            position=66:44,
                            identifier='packetIndex'
                          )
                      )
                  ),
                  AssignmentStmt(
                    position=67:13,
                    target=NameRef(
                        position=67:13,
                        identifier='isValid'
                      ),
                    value=LogicalLiteral(
                        position=67:24,
                        value=TRUE
                      )
                  ),
                  RepeatStmt(
                    position=69:13,
                    control=RepeatControl(
                        position=69:20,
                        increment_control=IncrementControl(
                            position=69:20,
                            variable='metricIndex',
                            bound_1=IntegerLiteral(
                                position=69:35,
                                value=1
                              ),
                            bound_2=Call(
                                position=69:40,
                                callee=NameRef(
                                    position=69:40,
                                    identifier='SIZEOF'
                                  ),
                                args=[Arg(
                                    position=69:47,
                                    value=NameRef(
                                        position=69:47,
                                        identifier='qualityThresholds'
                                      )
                                  )]
                              )
                          )
                      ),
                    body=[
                        AssignmentStmt(
                          position=70:17,
                          target=NameRef(
                              position=70:17,
                              identifier='currentMetric'
                            ),
                          value=IndexExpr(
                              position=70:34,
                              source=NameRef(
                                  position=70:34,
                                  identifier='qualityThresholds'
                                ),
                              index=NameRef(
                                  position=70:52,
                                  identifier='metricIndex'
                                )
                            )
                        ),
                        IfStmt(
                          position=71:17,
                          condition=UnaryExpr(
                              position=71:20,
                              op=UnaryOp.NOT,
                              operand=Call(
                                  position=71:24,
                                  callee=NameRef(
                                      position=71:24,
                                      identifier='validatePacket'
                                    ),
                                  args=[
                                      Arg(
                                        position=71:39,
                                        value=NameRef(
                                            position=71:39,
                                            identifier='currentPacket'
                                          )
                                      ),
                                      Arg(
                                        position=71:54,
                                        value=NameRef(
                                            position=71:54,
                                            identifier='currentMetric'
                                          )
                                      )
                                    ]
                                )
                            ),
                          then=[
                              AssignmentStmt(
                                position=72:21,
                                target=NameRef(
                                    position=72:21,
                                    identifier='isValid'
                                  ),
                                value=LogicalLiteral(
                                    position=72:32,
                                    value=FALSE
                                  )
                              ),
                              AssignmentStmt(
                                position=73:21,
                                target=NameRef(
                                    position=73:21,
                                    identifier='totalErrors'
                                  ),
                                value=BinaryExpr(
                                    position=73:36,
                                    left=NameRef(
                                        position=73:36,
                                        identifier='totalErrors'
                                      ),
                                    op=BinaryOp.ADD,
                                    right=IntegerLiteral(
                                        position=73:50,
                                        value=1
                                      )
                                  )
                              ),
                              CallStmt(
                                position=74:21,
                                call=Call(
                                    position=74:21,
                                    callee=NameRef(
                                        position=74:21,
                                        identifier='INSERT'
                                      ),
                                    args=[
                                        Arg(
                                          position=74:28,
                                          value=NameRef(
                                              position=74:28,
                                              identifier='errorLog'
                                            )
                                        ),
                                        Arg(
                                          position=74:38,
                                          value=StringLiteral(
                                              position=74:38,
                                              value='Validation failed'
                                            )
                                        ),
                                        Arg(
                                          position=74:59,
                                          value=NameRef(
                                              position=74:59,
                                              identifier='totalErrors'
                                            )
                                        )
                                      ]
                                  )
                              )
                            ],
                          or_else=[]
                        )
                      ]
                  ),
                  IfStmt(
                    position=78:13,
                    condition=NameRef(
                        position=78:16,
                        identifier='isValid'
                      ),
                    then=[
                        AssignmentStmt(
                          position=79:17,
                          target=NameRef(
                              position=79:17,
                              identifier='totalProcessed'
                            ),
                          value=BinaryExpr(
                              position=79:35,
                              left=NameRef(
                                  position=79:35,
                                  identifier='totalProcessed'
                                ),
                              op=BinaryOp.ADD,
                              right=IntegerLiteral(
                                  position=79:52,
                                  value=1
                                )
                            )
                        ),
                        CallStmt(
                          position=80:17,
                          call=Call(
                              position=80:17,
                              callee=NameRef(
                                  position=80:17,
                                  identifier='INSERT'
                                ),
                              args=[
                                  Arg(
                                    position=80:24,
                                    value=NameRef(
                                        position=80:24,
                                        identifier='processedPackets'
                                      )
                                  ),
                                  Arg(
                                    position=80:42,
                                    value=NameRef(
                                        position=80:42,
                                        identifier='currentPacket'
                                      )
                                  ),
                                  Arg(
                                    position=80:57,
                                    value=NameRef(
                                        position=80:57,
                                        identifier='totalProcessed'
                                      )
                                  )
                                ]
                            )
                        ),
                        CallStmt(
                          position=81:17,
                          call=Call(
                              position=81:17,
                              callee=NameRef(
                                  position=81:17,
                                  identifier='INSERT'
                                ),
                              args=[
                                  Arg(
                                    position=81:24,
                                    value=NameRef(
                                        position=81:24,
                                        identifier='validPackets'
                                      )
                                  ),
                                  Arg(
                                    position=81:38,
                                    value=NameRef(
                                        position=81:38,
                                        identifier='currentPacket'
                                      )
                                  ),
                                  Arg(
                                    position=81:53,
                                    value=BinaryExpr(
                                        position=81:53,
                                        left=Call(
                                            position=81:53,
                                            callee=NameRef(
                                                position=81:53,
                                                identifier='SIZEOF'
                                              ),
                                            args=[Arg(
                                                position=81:60,
                                                value=NameRef(
                                                    position=81:60,
                                                    identifier='validPackets'
                                                  )
                                              )]
                                          ),
                                        op=BinaryOp.ADD,
                                        right=IntegerLiteral(
                                            position=81:76,
                                            value=1
                                          )
                                      )
                                  )
                                ]
                            )
                        )
                      ],
                    or_else=[]
                  )
                ]
            )
          ]
      ),
      AssignmentStmt(
        position=86:5,
        target=NameRef(
            position=86:5,
            identifier='processingEndTime'
          ),
        value=Call(
            position=86:26,
            callee=NameRef(
                position=86:26,
                identifier='getCurrentTime'
              ),
            args=[]
          )
      ),
      AssignmentStmt(
        position=87:5,
        target=AttributeRef(
            position=87:5,
            source=NameRef(
                position=87:5,
                identifier='processingContext'
              ),
            identifier='throughput'
          ),
        value=BinaryExpr(
            position=87:37,
            left=NameRef(
                position=87:37,
                identifier='totalProcessed'
              ),
            op=BinaryOp.REAL_DIVIDE,
            right=BinaryExpr(
                position=87:55,
                left=NameRef(
                    position=87:55,
                    identifier='processingEndTime'
                  ),
                op=BinaryOp.SUBTRACT,
                right=NameRef(
                    position=87:75,
                    identifier='processingStartTime'
                  )
              )
          )
      ),
      AssignmentStmt(
        position=88:5,
        target=AttributeRef(
            position=88:5,
            source=NameRef(
                position=88:5,
                identifier='processingContext'
              ),
            identifier='errorRate'
          ),
        value=BinaryExpr(
            position=88:36,
            left=NameRef(
                position=88:36,
                identifier='totalErrors'
              ),
            op=BinaryOp.REAL_DIVIDE,
            right=BinaryExpr(
                position=88:51,
                left=NameRef(
                    position=88:51,
                    identifier='totalProcessed'
                  ),
                op=BinaryOp.ADD,
                right=NameRef(
                    position=88:68,
                    identifier='totalErrors'
                  )
              )
          )
      ),
      AssignmentStmt(
        position=90:5,
        target=AttributeRef(
            position=90:5,
            source=NameRef(
                position=90:5,
                identifier='results'
              ),
            identifier='processedCount'
          ),
        value=NameRef(
            position=90:31,
            identifier='totalProcessed'
          )
      ),
      AssignmentStmt(
        position=91:5,
        target=AttributeRef(
            position=91:5,
            source=NameRef(
                position=91:5,
                identifier='results'
              ),
            identifier='errorCount'
          ),
        value=NameRef(
            position=91:27,
            identifier='totalErrors'
          )
      ),
      AssignmentStmt(
        position=92:5,
        target=AttributeRef(
            position=92:5,
            source=NameRef(
                position=92:5,
                identifier='results'
              ),
            identifier='processingTime'
          ),
        value=BinaryExpr(
            position=92:31,
            left=NameRef(
                position=92:31,
                identifier='processingEndTime'
              ),
            op=BinaryOp.SUBTRACT,
            right=NameRef(
                position=92:51,
                identifier='processingStartTime'
              )
          )
      ),
      AssignmentStmt(
        position=93:5,
        target=AttributeRef(
            position=93:5,
            source=NameRef(
                position=93:5,
                identifier='results'
              ),
            identifier='throughput'
          ),
        value=AttributeRef(
            position=93:27,
            source=NameRef(
                position=93:27,
                identifier='processingContext'
              ),
            identifier='throughput'
          )
      ),
      ReturnStmt(
        position=95:5,
        value=NameRef(
            position=95:12,
            identifier='results'
          )
      )
    ]
)