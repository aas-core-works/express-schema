ProcedureDeclaration(
  position=1:1,
  identifier='applyTransformation',
  formal_parameters=[
      FormalParameter(
        position=2:9,
        identifiers=['geometry'],
        of_type=NamedType(
            position=2:20,
            reference='GeometricRepresentation'
          )
      ),
      FormalParameter(
        position=3:9,
        identifiers=['transformationMatrix'],
        of_type=ConformantArrayType(
            position=3:32,
            bound_spec=BoundSpec(
                position=3:38,
                lower=IntegerLiteral(
                    position=3:39,
                    value=1
                  ),
                upper=IntegerLiteral(
                    position=3:41,
                    value=4
                  )
              ),
            optional=False,
            unique=False,
            of=ConformantArrayType(
                position=3:47,
                bound_spec=BoundSpec(
                    position=3:53,
                    lower=IntegerLiteral(
                        position=3:54,
                        value=1
                      ),
                    upper=IntegerLiteral(
                        position=3:56,
                        value=4
                      )
                  ),
                optional=False,
                unique=False,
                of=RealType(
                    position=3:62
                  )
              )
          )
      ),
      FormalParameter(
        position=4:13,
        identifiers=['transformedGeometry'],
        of_type=NamedType(
            position=4:35,
            reference='GeometricRepresentation'
          )
      ),
      FormalParameter(
        position=5:13,
        identifiers=['transformationReport'],
        of_type=NamedType(
            position=5:36,
            reference='TransformationReport'
          )
      )
    ],
  head=AlgorithmHead(
      declarations=[],
      constant_definitions=[
          ConstantDefinition(
            position=8:9,
            identifier='identityMatrix',
            type_selection=ArrayType(
                position=8:26,
                bound_spec=BoundSpec(
                    position=8:32,
                    lower=IntegerLiteral(
                        position=8:33,
                        value=1
                      ),
                    upper=IntegerLiteral(
                        position=8:35,
                        value=4
                      )
                  ),
                optional=False,
                unique=False,
                of=ArrayType(
                    position=8:41,
                    bound_spec=BoundSpec(
                        position=8:47,
                        lower=IntegerLiteral(
                            position=8:48,
                            value=1
                          ),
                        upper=IntegerLiteral(
                            position=8:50,
                            value=4
                          )
                      ),
                    optional=False,
                    unique=False,
                    of=RealType(
                        position=8:56
                      )
                  )
              ),
            init=AggregateLiteral(
                position=8:64,
                elements=[]
              )
          ),
          ConstantDefinition(
            position=9:9,
            identifier='maxScale',
            type_selection=RealType(
                position=9:20
              ),
            init=RealLiteral(
                position=9:28,
                value=10.0
              )
          )
        ],
      local_variable_definitions=[
          LocalVariableDefinition(
            position=13:9,
            identifiers=['tempGeometry'],
            of_type=NamedType(
                position=13:24,
                reference='GeometricRepresentation'
              )
          ),
          LocalVariableDefinition(
            position=14:9,
            identifiers=['scaleFactor'],
            of_type=RealType(
                position=14:23
              )
          ),
          LocalVariableDefinition(
            position=15:9,
            identifiers=[
                'i',
                'j'
              ],
            of_type=IntegerType(
                position=15:16
              )
          )
        ]
    ),
  body=[
      AssignmentStmt(
        position=18:5,
        target=AttributeRef(
            position=18:5,
            source=NameRef(
                position=18:5,
                identifier='transformationReport'
              ),
            identifier='startTime'
          ),
        value=Call(
            position=18:39,
            callee=NameRef(
                position=18:39,
                identifier='getCurrentTime'
              ),
            args=[]
          )
      ),
      AssignmentStmt(
        position=19:5,
        target=NameRef(
            position=19:5,
            identifier='tempGeometry'
          ),
        value=NameRef(
            position=19:21,
            identifier='geometry'
          )
      ),
      AssignmentStmt(
        position=21:5,
        target=NameRef(
            position=21:5,
            identifier='scaleFactor'
          ),
        value=Call(
            position=21:20,
            callee=NameRef(
                position=21:20,
                identifier='calculateScaleFactor'
              ),
            args=[Arg(
                position=21:41,
                value=NameRef(
                    position=21:41,
                    identifier='transformationMatrix'
                  )
              )]
          )
      ),
      IfStmt(
        position=22:5,
        condition=BinaryExpr(
            position=22:8,
            left=NameRef(
                position=22:8,
                identifier='scaleFactor'
              ),
            op=BinaryOp.GREATER_THAN,
            right=NameRef(
                position=22:22,
                identifier='maxScale'
              )
          ),
        then=[
            CallStmt(
              position=23:9,
              call=Call(
                  position=23:9,
                  callee=NameRef(
                      position=23:9,
                      identifier='normalizeTransformationMatrix'
                    ),
                  args=[Arg(
                      position=23:39,
                      value=NameRef(
                          position=23:39,
                          identifier='transformationMatrix'
                        )
                    )]
                )
            ),
            AssignmentStmt(
              position=24:9,
              target=AttributeRef(
                  position=24:9,
                  source=NameRef(
                      position=24:9,
                      identifier='transformationReport'
                    ),
                  identifier='wasNormalized'
                ),
              value=LogicalLiteral(
                  position=24:47,
                  value=TRUE
                )
            )
          ],
        or_else=[AssignmentStmt(
            position=26:9,
            target=AttributeRef(
                position=26:9,
                source=NameRef(
                    position=26:9,
                    identifier='transformationReport'
                  ),
                identifier='wasNormalized'
              ),
            value=LogicalLiteral(
                position=26:47,
                value=FALSE
              )
          )]
      ),
      AssignmentStmt(
        position=29:5,
        target=NameRef(
            position=29:5,
            identifier='transformedGeometry'
          ),
        value=Call(
            position=29:28,
            callee=NameRef(
                position=29:28,
                identifier='performMatrixTransformation'
              ),
            args=[
                Arg(
                  position=29:56,
                  value=NameRef(
                      position=29:56,
                      identifier='tempGeometry'
                    )
                ),
                Arg(
                  position=29:70,
                  value=NameRef(
                      position=29:70,
                      identifier='transformationMatrix'
                    )
                )
              ]
          )
      ),
      CallStmt(
        position=30:5,
        call=Call(
            position=30:5,
            callee=NameRef(
                position=30:5,
                identifier='validateTransformedGeometry'
              ),
            args=[Arg(
                position=30:33,
                value=NameRef(
                    position=30:33,
                    identifier='transformedGeometry'
                  )
              )]
          )
      ),
      AssignmentStmt(
        position=32:5,
        target=AttributeRef(
            position=32:5,
            source=NameRef(
                position=32:5,
                identifier='transformationReport'
              ),
            identifier='endTime'
          ),
        value=Call(
            position=32:37,
            callee=NameRef(
                position=32:37,
                identifier='getCurrentTime'
              ),
            args=[]
          )
      ),
      AssignmentStmt(
        position=33:5,
        target=AttributeRef(
            position=33:5,
            source=NameRef(
                position=33:5,
                identifier='transformationReport'
              ),
            identifier='success'
          ),
        value=LogicalLiteral(
            position=33:37,
            value=TRUE
          )
      )
    ]
)